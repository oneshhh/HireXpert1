<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Inter:wght@400;500;600;700&family=Noto+Sans:wght@400;500;700;900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<title>Create Interview</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
     :root {
         --primary-color: #1173d4;
         --secondary-color: #f0f2f4;
         --text-primary: #111418;
         --text-secondary: #617589;
     }
     /* This style is for the custom modal */
     .modal-hidden {
        display: none;
     }
    </style>
</head>
<body class="bg-gray-50 text-[var(--text-primary)]" style='font-family: "Inter", "Noto Sans", sans-serif;'>
<div class="relative flex min-h-screen w-full flex-col overflow-x-hidden">
<header class="sticky top-0 z-10 flex h-16 items-center justify-between whitespace-nowrap border-b border-gray-200 bg-white px-6">
<div class="flex items-center gap-6">
    <div class="flex items-center gap-4">
        <svg class="h-8 w-8 text-[var(--primary-color)]" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd" d="M24 18.4228L42 11.475V34.3663C42 34.7796 41.7457 35.1504 41.3601 35.2992L24 42V18.4228Z" fill="currentColor" fill-rule="evenodd"></path>
            <path clip-rule="evenodd" d="M24 8.18819L33.4123 11.574L24 15.2071L14.5877 11.574L24 8.18819ZM9 15.8487L21 20.4805V37.6263L9 32.9945V15.8487ZM27 37.6263V20.4805L39 15.8487V32.9945L27 37.6263ZM25.354 2.29885C24.4788 1.98402 23.5212 1.98402 22.646 2.29885L4.98454 8.65208C3.7939 9.08038 3 10.2097 3 11.475V34.3663C3 36.0196 4.01719 37.5026 5.55962 38.098L22.9197 44.7987C23.6149 45.0671 24.3851 45.0671 25.0803 44.7987L42.4404 38.098C43.9828 37.5026 45 36.0196 45 34.3663V11.475C45 10.2097 44.2061 9.08038 43.0155 8.65208L25.354 2.29885Z" fill="currentColor" fill-rule="evenodd"></path>
        </svg>
        <h1 class="text-xl font-bold tracking-tight text-[var(--text-primary)]">HireXpert</h1>
    </div>
    <a id="back-to-dashboard-link" class="text-sm font-medium text-[var(--text-secondary)] hover:text-[var(--primary-color)]" href="/HR_Dashboard.html">Dashboard</a>
</div>
<div class="flex items-center gap-4">
<button class="relative rounded-full p-2 text-[var(--text-secondary)] hover:bg-gray-100 hover:text-[var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] focus:ring-offset-2">
<span class="material-symbols-outlined">notifications</span>
</button>
<div class="h-10 w-10 rounded-full bg-cover bg-center" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAYeedkouPNeWBOmj7kZ2KpB0T2HsF8ryoWd5IVhvtWd5gn8UU5bN0jJ8zcoup1fLU1QH5U8_-J2oZmydbc9K0TsIEFCq2co3NNuaMgcZkejcE3m1LrNhAh5KIGn_-O7B3j4jrvD3kbCFA_umrzwDuRL0I9Q2J6y7pOoYAmrAaMQzINWZI1vciEo2XTh-li5j__kHHBqGZOlbhb2x1yOeMgnynrNXnJw6Aqx2UVfgxNd3f87hHvOtUlc2Gi0zv-teML_Obi2qYN5M8");'></div>
</div>
</header>
<main class="flex-1 px-4 py-10 lg:px-6">
<div class="mx-auto max-w-7xl">
<div class="mb-8">
<h2 class="text-3xl font-bold tracking-tight">Create a New Interview</h2>
<p class="mt-2 text-base text-[var(--text-secondary)]">Fill in the details below to schedule a new interview.</p>
</div>
<div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
<div class="lg:col-span-2">
<form id="scheduleForm" class="rounded-lg border border-gray-200 bg-white shadow-sm">
<div class="space-y-6 p-6">
<div>
<label class="mb-2 text-sm font-medium text-[var(--text-primary)]" for="interview-title">Title of the Interview</label>
<input class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)]" id="interview-title" name="title" placeholder="e.g., Senior Product Designer" type="text" required>
</div>
<div>
<h3 class="mb-2 text-sm font-medium text-[var(--text-primary)]">Questions</h3>
<div id="questions-container" class="space-y-4">
<div class="flex items-start gap-4">
<textarea class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)] min-h-24 flex-1 resize-y" name="questions[]" placeholder="Enter your question here" required></textarea>
<select name="timeLimits[]" class="w-28 rounded-md border-gray-300 bg-white p-2 text-sm text-[var(--text-primary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)] h-12">
    <option value="0">Untimed</option>
    <option value="60">60s</option>
    <option value="90">90s</option>
    <option value="120">120s</option>
    <option value="150">150s</option>
    <option value="180">180s</option>
</select>
<button type="button" onclick="this.parentElement.remove(); manageAddQuestionButton();" class="flex h-12 w-12 flex-shrink-0 items-center justify-center overflow-hidden rounded-md px-4 text-sm font-medium leading-normal tracking-wide bg-[var(--secondary-color)] text-[var(--text-primary)] hover:bg-gray-200 !p-0">
<span class="material-symbols-outlined text-xl">delete</span>
</button>
</div>
</div>
<div class="mt-4 flex items-center gap-4">
    <button type="button" onclick="addQuestion()" class="flex h-10 cursor-pointer items-center justify-center overflow-hidden rounded-md bg-[var(--secondary-color)] px-4 text-sm font-medium text-[var(--text-primary)] hover:bg-gray-200 gap-2">
        <span class="material-symbols-outlined">add</span>
        <span>Add Question</span>
    </button>
    <button type="button" id="apply-time-to-all" class="text-sm font-medium text-[var(--primary-color)] hover:underline">Apply first time limit to all</button>
</div>
</div>
<div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
<div>
    <label class="mb-2 text-sm font-medium text-[var(--text-primary)]" for="interview-date">Date</label>
    <div>
        <input class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)]" id="interview-date" name="date" placeholder="Select Date" type="date" required>
    </div>
</div>
<div>
    <label class="mb-2 text-sm font-medium text-[var(--text-primary)]" for="interview-time">Time</label>
    <div>
        <input class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)]" id="interview-time" name="time" type="time" value="09:00" required>
    </div>
</div>
</div>
<div>
    <label class="mb-2 block text-sm font-medium text-[var(--text-primary)]" for="candidate-emails">Candidate Emails</label>
    <textarea
        class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)]"
        id="candidate-emails"
        name="emails"
        rows="3"
        placeholder="Enter candidate emails, separated by commas"
        required></textarea>
    <p class="mt-1 text-xs text-[var(--text-secondary)]">Separate multiple emails with a comma (,)</p>
</div>
</div>
<div class="flex justify-end border-t border-gray-200 bg-gray-50 p-6">
<button class="flex h-10 cursor-pointer items-center justify-center overflow-hidden rounded-md px-4 text-sm font-medium leading-normal tracking-wide bg-[var(--primary-color)] text-white hover:bg-opacity-90 w-full sm:w-auto" type="submit">Schedule Interview</button>
</div>
</form>
</div>
<div class="lg:col-span-1">
<div class="sticky top-24 rounded-lg border border-indigo-200 bg-indigo-50/50 p-6 shadow-sm">
<div class="flex items-center gap-3">
<span class="material-symbols-outlined text-indigo-500">auto_awesome</span>
<h3 class="text-base font-semibold text-indigo-800">Generate Questions with AI</h3>
</div>
<p class="mt-1 text-sm text-indigo-700">Paste the Job Description below to automatically generate relevant interview questions.</p>
<div class="mt-4 space-y-4">
<textarea class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)] min-h-48 resize-y" id="job-description" placeholder="Paste Job Description here..."></textarea>
<div class="flex items-end gap-4">
    <div class="flex-1">
        <label class="mb-2 text-sm font-medium text-[var(--text-primary)]" for="num-questions">Number of questions</label>
        <select id="num-questions" class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)]">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5" selected>5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
        </select>
    </div>
    <div class="w-48">
        <label class="mb-2 text-sm font-medium text-[var(--text-primary)]" for="difficulty">Difficulty</label>
        <select id="difficulty" class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)]">
            <option value="Beginner" selected>Beginner</option>
            <option value="Moderate">Moderate</option>
            <option value="Expert">Expert</option>
        </select>
    </div>
</div>
<button id="generate-questions-btn" class="flex h-10 w-full cursor-pointer items-center justify-center overflow-hidden rounded-md px-4 text-sm font-medium leading-normal tracking-wide bg-indigo-500 text-white hover:bg-indigo-600 gap-2">
    <span>Generate</span>
</button>
</div>
</div>
</div>
</div>
</div>
</main>
</div>

<div id="notification-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-75">
    <div class="w-full max-w-sm transform rounded-lg bg-white p-6 shadow-xl text-center">
        <div id="notification-modal-icon" class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100">
             <span class="material-symbols-outlined text-3xl text-green-600">check_circle</span>
        </div>
        <h3 id="notification-modal-title" class="mt-4 text-lg font-medium text-gray-900">Success!</h3>
        <div class="mt-2">
            <p id="notification-modal-text" class="text-sm text-gray-500">Your action was completed successfully.</p>
        </div>
        <div id="notification-modal-buttons" class="mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3">
            </div>
    </div>
</div>

<script>
    // These functions need to be global for the external scripts to find them
    function manageAddQuestionButton() {
        const container = document.getElementById("questions-container");
        const addButton = document.querySelector('button[onclick="addQuestion()"]');
        if (container.children.length >= 15) {
            addButton.disabled = true;
            addButton.classList.add('opacity-50', 'cursor-not-allowed');
        } else {
            addButton.disabled = false;
            addButton.classList.remove('opacity-50', 'cursor-not-allowed');
        }
    }

    function addQuestion(questionText = '') {
      const container = document.getElementById("questions-container");
      if (container.children.length >= 15) return;
      const div = document.createElement("div");
      div.classList.add("flex", "items-start", "gap-4");
      div.innerHTML = `
        <textarea class="w-full rounded-md border border-gray-300 bg-white p-3 text-base text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)] min-h-24 flex-1 resize-y" name="questions[]" placeholder="Enter your question here" required>${questionText}</textarea>
        <select name="timeLimits[]" class="w-28 rounded-md border-gray-300 bg-white p-2 text-sm text-[var(--text-primary)] focus:border-[var(--primary-color)] focus:ring-1 focus:ring-[var(--primary-color)] h-12">
            <option value="0">Untimed</option>
            <option value="60">60s</option>
            <option value="90">90s</option>
            <option value="120">120s</option>
            <option value="150">150s</option>
            <option value="180">180s</option>
        </select>
        <button type="button" onclick="this.parentElement.remove(); manageAddQuestionButton();" class="flex h-12 w-12 flex-shrink-0 items-center justify-center overflow-hidden rounded-md px-4 text-sm font-medium leading-normal tracking-wide bg-[var(--secondary-color)] text-[var(--text-primary)] hover:bg-gray-200 !p-0">
          <span class="material-symbols-outlined text-xl">delete</span>
        </button>
      `;
      container.appendChild(div);
      manageAddQuestionButton();
    }
    
function showNotification(title, text, options = {}) {
    const { isError = false, onConfirm = null, confirmText = 'Confirm', cancelText = 'Cancel' } = options;

    const modal = document.getElementById('notification-modal');
    const modalTitle = document.getElementById('notification-modal-title');
    const modalText = document.getElementById('notification-modal-text');
    const modalIcon = document.getElementById('notification-modal-icon');
    const btnContainer = document.getElementById('notification-modal-buttons');
    
    if (!modal) {
        if (onConfirm) {
            if (confirm(`${title}\n${text}`)) {
                onConfirm();
            }
        } else {
            alert(`${title}: ${text}`);
        }
        return;
    }

    modalTitle.textContent = title;
    modalText.textContent = text;
    
    if (isError) {
        modalIcon.innerHTML = `<span class="material-symbols-outlined text-3xl text-red-600">error</span>`;
        modalIcon.className = "mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100";
    } else {
        modalIcon.innerHTML = `<span class="material-symbols-outlined text-3xl text-green-600">check_circle</span>`;
        modalIcon.className = "mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100";
    }

    btnContainer.innerHTML = ''; // Clear previous buttons
    
    if (onConfirm) { // This is a confirmation dialog with two buttons
        const confirmBtn = document.createElement('button');
        confirmBtn.type = 'button';
        confirmBtn.className = 'inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:col-start-2';
        confirmBtn.textContent = confirmText;
        confirmBtn.onclick = () => {
            modal.classList.add('hidden');
            onConfirm();
        };

        const cancelBtn = document.createElement('button');
        cancelBtn.type = 'button';
        cancelBtn.className = 'mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0';
        cancelBtn.textContent = cancelText;
        cancelBtn.onclick = () => {
            modal.classList.add('hidden');
        };
        
        btnContainer.appendChild(cancelBtn);
        btnContainer.appendChild(confirmBtn);

    } else { // This is a simple notification with one button
        const okBtn = document.createElement('button');
        okBtn.type = 'button';
        // ADDED h-10 for fixed height, REMOVED py-2 as it's no longer needed for alignment
        okBtn.className = 'inline-flex w-full h-10 justify-center items-center rounded-md bg-[var(--primary-color)] px-3 text-sm font-semibold text-white shadow-sm hover:bg-opacity-90';
        okBtn.textContent = 'Got it';
        okBtn.onclick = () => {
            modal.classList.add('hidden');
        };
        btnContainer.appendChild(okBtn);
    }
}
</script>

<script src="js/schedule.js"></script>
<script src="js/generate.js"></script>

</body>
</html>